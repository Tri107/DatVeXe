<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body>
  <%- include('../partials/header', { title: 'Sửa chuyến', user }) %>

  <section class="container mt-5">
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h2><i class="bi bi-pencil-square me-2"></i>Sửa thông tin chuyến</h2>
      <a href="/admin/chuyen" class="btn btn-outline-secondary btn-sm">← Quay lại danh sách</a>
    </div>

    <form action="/admin/chuyen/edit/<%= item.Chuyen_id %>" method="POST" class="row g-4">

      <div class="col-md-4">
        <label class="form-label">Tên chuyến</label>
        <input type="text" name="Chuyen_name" class="form-control" value="<%= item.Chuyen_name %>" required>
      </div>

      <div class="col-md-2">
        <label class="form-label">Tình trạng</label>
        <select name="Tinh_Trang" class="form-select">
          <option value="còn chỗ" <%= item.Tinh_Trang === 'còn chỗ' ? 'selected' : '' %>>Còn chỗ</option>
          <option value="hết chỗ" <%= item.Tinh_Trang === 'hết chỗ' ? 'selected' : '' %>>Hết chỗ</option>
        </select>
      </div>

      <div class="col-md-3">
        <label class="form-label">Ngày giờ</label>
        <input type="datetime-local" name="Ngay_gio" class="form-control"
          value="<%= new Date(item.Ngay_gio).toISOString().slice(0, 16) %>" required>
      </div>

      <div class="col-md-3">
        <label class="form-label">Tuyến đường</label>
        <select name="TuyenDuong_id" class="form-select">
          <% tuyen.forEach(t => { %>
          <option value="<%= t.TuyenDuong_id %>" <%= t.TuyenDuong_id === item.TuyenDuong_id ? 'selected' : '' %>>
            <%= t.BenDi_name %> → <%= t.BenDen_name %>
          </option>
          <% }) %>
        </select>
      </div>

      <div class="col-md-2">
        <label class="form-label">Xe</label>
        <select name="Xe_id" class="form-select">
          <% xe.forEach(x => { %>
          <option value="<%= x.Xe_id %>" <%= x.Xe_id === item.Xe_id ? 'selected' : '' %>>
            <%= x.Bien_so %>
          </option>
          <% }) %>
        </select>
      </div>

      <div class="col-md-3">
        <label class="form-label">Tài xế</label>
        <select name="TaiXe_id" class="form-select">
          <% taixe.forEach(t => { %>
          <option value="<%= t.TaiXe_id %>" <%= t.TaiXe_id === item.TaiXe_id ? 'selected' : '' %>>
            <%= t.TaiXe_name %>
          </option>
          <% }) %>
        </select>
      </div>

      <div class="col-12 text-end mt-3">
        <button type="submit" class="btn btn-success me-2">
          <i class="bi bi-save me-1"></i>Cập nhật
        </button>
        <a href="/admin/chuyen" class="btn btn-secondary">
          <i class="bi bi-x-circle me-1"></i>Hủy
        </a>
      </div>

    </form>
  </section>

  <%- include('../partials/footer') %>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
</body>

</html>
